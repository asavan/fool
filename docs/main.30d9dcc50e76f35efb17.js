(()=>{"use strict";var e,t,n={392:(e,t,n)=>{function r(e){e&&e.classList.add("hidden")}function a(e){e&&e.classList.remove("hidden")}function o(e){e&&e.remove()}function c(e,t,n){e.logger&&(n.innerHTML+="object"==typeof t?(JSON&&JSON.stringify?JSON.stringify(t):t)+"<br />":t+"<br />")}function i(e){switch(e.toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(e)}}function l(e,t,n){const r=e.location.search,a=new URLSearchParams(r);for(const[e,t]of a)"number"==typeof n[e]?n[e]=parseInt(t,10):"boolean"==typeof n[e]?n[e]=i(t):n[e]=t}n.d(t,{Bk:()=>l,N8:()=>r,cM:()=>c,ew:()=>o,gw:()=>s,hu:()=>u,oX:()=>a});const s=e=>new Promise((t=>setTimeout(t,e)));function u(e,t){if(!e)throw t}}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e](o,o.exports,a),o.exports}a.m=n,a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>e+"."+{749:"fef6493886b7bae9f884",945:"8d1ccfac1dd0f7e53580",970:"232c43694ce9cbaf5836"}[e]+".js",a.miniCssF=e=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="fool:",a.l=(n,r,o,c)=>{if(e[n])e[n].push(r);else{var i,l;if(void 0!==o)for(var s=document.getElementsByTagName("script"),u=0;u<s.length;u++){var d=s[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+o){i=d;break}}i||(l=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",t+o),i.src=n),e[n]=[r];var f=(t,r)=>{i.onerror=i.onload=null,clearTimeout(p);var a=e[n];if(delete e[n],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((e=>e(r))),t)return t(r)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=f.bind(null,i.onerror),i.onload=f.bind(null,i.onload),l&&document.head.appendChild(i)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!e;)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={179:0};a.f.j=(t,n)=>{var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,a)=>r=e[t]=[n,a]));n.push(r[2]=o);var c=a.p+a.u(t),i=new Error;a.l(c,(n=>{if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),c=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+c+")",i.name="ChunkLoadError",i.type=o,i.request=c,r[1](i)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,o,[c,i,l]=n,s=0;if(c.some((t=>0!==e[t]))){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(l)l(a)}for(t&&t(n);s<c.length;s++)o=c[s],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunkfool=self.webpackChunkfool||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{const e={modes:["net","ai","server"],mode:"net",wsPort:8088,color:"red",logger:!0,networkDebug:!1};var t=a(392);function n(e,t,n,r,a){const o=t.querySelector(".places");o.replaceChildren();const c=t.createElement("ul");c.classList.add("circle-wrapper"),o.appendChild(c);const i=360/a.length;let l=90,s=null;c.addEventListener("click",(function(e){if(e.preventDefault(),e.target&&null!==e.target.dataset.id){if(s)return s.classList.remove("selected"),r.swap(s.dataset.id,e.target.dataset.id),void(s=null);s=e.target,s.classList.add("selected")}}));for(let e=0;e<a.length;++e){const n=t.createElement("li");n.innerText=a[e].name,n.dataset.id=e,n.dataset.angle=l+"deg",n.style.setProperty("--angle-deg",l+"deg"),n.classList.add("circle","clickable"),l+=i,c.appendChild(n)}const u=t.createElement("button");u.classList.add("start-button","clickable"),u.addEventListener("click",(function(e){e.preventDefault(),o.replaceChildren(),r.onSeatsFinished()})),o.appendChild(u)}function r(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}}function o(e){}const c={shuffle:o,deal:o,draw:o,discard:o,move:o,clearPlayer:o,ready:o,changeCurrent:o};const i=7;let l=0,s=1,u=[],d=null,f=null,p=[],h=null,g=null;function w(e,t){return(e+s+t)%t}function m(e,t){return(l+(e+1)*s+t)%t}function y(){return f}const v=["red","yellow","green","blue"];function b(e){let t;if(e%14==13)return"black";switch(Math.floor(e/14)){case 0:case 4:t="red";break;case 1:case 5:t="yellow";break;case 2:case 6:t="green";break;case 3:case 7:t="blue"}return t}function C(e){switch(e%14){case 10:return"Skip";case 11:return"Reverse";case 12:return"Draw2";case 13:return Math.floor(e/14)>=4?"Draw4":"Wild";default:return"Number "+e%14}}function S(e){let t;switch(e%14){case 10:case 11:case 12:t=20;break;case 13:t=50;break;default:t=e%14}return t}async function k(){const e=function(){let e=[...Array(112).keys()];return e.splice(56,1),e.splice(69,1),e.splice(82,1),e.splice(95,1),e}();return r(e),await c.shuffle(),{deal:function(){return e.pop()},addCardAndShuffle:async function(t){!function(t){e.push(t)}(t),r(e),await c.shuffle()}}}function L(e){const t=u.length;u.push(function(e,t){const n=e,r=t,a=[];return{getName:()=>n,addCard:e=>{a.push(e)},pile:()=>[...a],getIndex:()=>r,cleanHand:async()=>{a.length=0,await c.clearPlayer(r)}}}(e,t))}async function E(e,t){const n=e.deal();return u[t].addCard(n),await c.draw(t,n),n}function P(e,t){c[e]=t}function D(){return{[Symbol.iterator](){let e=0;return{next:()=>e>=u.length?{done:!0,value:e}:{done:!1,value:u[e++]},return:()=>({done:!0})}}}}function q(){return u.length}function x(){return l}async function N(){return s*=-1,h=w(null==h?l:h,u.length),await async function(e,...t){const n=c[e];if("function"==typeof n)return await n(...t)}("changeCurrent",h)}async function T(){d=await k();let e=[...u];for(;e.length>1;){const t=e.length;let n=new Array(t),r=0;for(let a=0;a<t;a++){const o=m(a,t),c=S(await E(d,e[o].getIndex()));n[o]=c,r=Math.max(r,c)}const a=[];for(let o=0;o<t;o++)n[o]===r&&a.push(e[o]);e=a}e.length>=1&&(l=e[0].getIndex())}async function j(){return h=w(null==h?l+s:h,u.length),await c.changeCurrent(h)}async function M(){await async function(){f=null,p=[];for(const e of u)await e.cleanHand();d=await k()}();for(let e=0;e<i;++e){const e=u.length;for(let t=0;t<e;t++){const n=m(t,e);await E(d,u[n].getIndex())}}const e=await async function(e){let t=e.deal();for(f=t,await c.discard(t);"black"===b(t);)f=null,await e.addCardAndShuffle(t),t=e.deal(),f=t,await c.discard(t);return p.push(t),t}(d);await async function(e,t){const n=C(e);if("Reverse"!==n)if("Skip"!==n)if("Draw2"!==n)if("Draw4"!==n)g=b(e),await c.changeCurrent(h);else{for(let e=0;e<4;++e)await E(d,t);await j()}else{for(let e=0;e<2;++e)await E(d,t);await j()}else await j();else 2===u.length?await j():await N()}(e,m(0,u.length))}async function O(e,t){if(e!==h)return!1;if("Wild"===C(t)){const t=await c.chooseColor(e);return g=t,!!v.includes(t)}if("Draw4"===C(t)){if(function(e,t){return u[e].pile().find((e=>b(e)===t))}(e,g))return!1;const t=await c.chooseColor(e);return g=t,!!v.includes(t)}return b(t)==g||C(t)==C(f)}function A(){return{chooseDealer:T,deal:M,getPlayerIterator:D,addPlayer:L,size:q,on:P,dealToPlayer:E,cardScore:S,cardColor:b,cardType:C,getDealer:x,getCardOnBoard:y,tryMove:O}}let I=[];function B(e,t){const n=t.content.cloneNode(!0).firstElementChild;return n.style.setProperty("--sprite-x",1400-e%14*100+"%"),n.style.setProperty("--sprite-y",800-100*Math.floor(e/14)+"%"),n}function F(e,t,n){const r=e.createElement("ul"),a=e.querySelector("#card");r.classList.add("hand");for(const e of n)r.appendChild(B(e,a));t.appendChild(r)}function J(e,t,n){const r=t.querySelector(".places");r.replaceChildren();const a=t.createElement("ul");a.classList.add("circle-wrapper"),r.appendChild(a);const o=360/n.size();let c=90;const i=n.getPlayerIterator();let l=0;for(const e of i){const n=t.createElement("li"),r=t.createElement("span");r.innerText=e.getName(),n.appendChild(r),F(t,n,e.pile()),n.dataset.id=l,n.dataset.angle=c+"deg",n.style.setProperty("--angle-deg",c+"deg"),n.classList.add("circle"),c+=o,a.appendChild(n),++l}W(e,t,n.getCardOnBoard())}function W(e,t,n){const r=t.querySelector(".places");let a=r.querySelector(".center-pile");a?a.replaceChildren():(a=t.createElement("div"),a.classList.add("center-pile"),r.appendChild(a)),null!==n&&F(t,a,[n])}function H(e,n,r,a,o){const c=A();I=a;for(const e of I)c.addPlayer(e.name);n.querySelector(".hand-cont");return c.on("draw",(async()=>{J(e,n,c),await(0,t.gw)(300)})),c.on("discard",(async e=>{W(0,n,e),await(0,t.gw)(300)})),c.on("shuffle",(async()=>{J(e,n,c),await(0,t.gw)(300)})),c.on("deal",(()=>{})),{chooseDealer:async function(){return await c.chooseDealer()},deal:async function(){return await c.deal()},draw:async function(e){return await c.deal()},start:function(){}}}function R(e){}const $={move:R,gameover:R,username:R,start:R,swap:R,"uno-start":R};let _=[];function z(e,r,a){function o(e,t){$[e]=t}const c=()=>{$.start(_)},i=r.querySelector(".start");i&&i.addEventListener("click",c);const l=async e=>{await e.chooseDealer(),await(0,t.gw)(1e3),await e.deal(),await e.start()},s=async()=>{c();const t=H(e,r,0,_);await l(t)};return o("onSeatsFinished",s),{on:o,onChange:function(e){},join:(e,t,a)=>{_[e]={name:t,external_id:a},n(0,r,0,$,_)},start:c,onConnect:()=>{!function(e,t,n,r){const a=t.querySelector(".name-form-cont"),o=t.querySelector("#nameform").content.cloneNode(!0).firstElementChild;a.replaceChildren(o);const c=t.querySelector(".nameform"),i=t.querySelector(".nameinput"),l=t.querySelector(".container");let s=e.sessionStorage.getItem("username");function u(e){r.username(e),c.classList.add("hidden"),l.classList.remove("hidden")}"net"==n.mode&&l.classList.add("hidden"),s&&u(s),c.addEventListener("submit",(function(t){t.preventDefault(),e.sessionStorage.setItem("username",i.value),u(i.value)}))}(e,r,a,$)},swap:(e,t)=>{const a=_[e];_[e]=_[t],_[t]=a,n(0,r,0,$,_)},onStart:t=>{_=t;H(e,r,0,_)},main:l,afterAllJoined:s}}"serviceWorker"in navigator&&(navigator.serviceWorker.register("./sw.js",{scope:"./"}),function(e,n){const r=n.querySelector(".butInstall");let a;r.addEventListener("click",(e=>{e.preventDefault(),(0,t.N8)(r),a.prompt(),a.userChoice.then((e=>{}))})),e.addEventListener("beforeinstallprompt",(e=>{e.preventDefault(),a=e,(0,t.oX)(r)}))}(window,document)),function(n,r){(0,t.Bk)(n,r,e),"net"===e.mode?a.e(970).then(a.bind(a,970)).then((t=>{t.default(n,r,e,z)})):"server"===e.mode?a.e(749).then(a.bind(a,749)).then((t=>{t.default(n,r,e,z)})):"ai"===e.mode?a.e(945).then(a.bind(a,945)).then((t=>{t.default(n,r,e,z)})):(0,t.hu)(!1,"Unsupported mode")}(window,document)})()})();