"use strict";(self.webpackChunksuno=self.webpackChunksuno||[]).push([[666],{211:(e,n,o)=>{o.d(n,{A:()=>r});var t=o(541);function r(e,n){return Object.assign({},(0,t.A)(e,n),{changeCurrent:e.setCurrentObj,shuffle:e.setDeck,clearPlayer:e.cleanHandExternal,discard:e.onDiscard,roundover:e.onEndRound,gameover:e.onEndRound})}},345:(e,n,o)=>{o.d(n,{$0:()=>c,CD:()=>i,wp:()=>a});var t=o(746),r=o(272);function s(){}function a(e,n,o){const t=e.sessionStorage.getItem(n.idNameInStorage);if(t)return t;const s=r.A.makeId(n.idNameLen,o);return e.sessionStorage.setItem(n.idNameInStorage,s),s}function c(e,n){return e.wh?e.wh:"https:"!==n.protocol?"ws://"+n.hostname+":"+e.wsPort:void 0}function i(e,n,o){const r=(0,t.A)(["error","open","message","beforeclose","close"]),a=new WebSocket(n);function c(e){o.log("Websocket message received: "+e);const n=JSON.parse(e);return r.call("message",n)}return a.addEventListener("open",(function(){return r.call("open",e)})),a.onclose=function(n){return o.log("Websocket closed "+n.code+" "+n.reason),r.call("close",e)},a.onmessage=async function(e){if(e.data instanceof Blob){return c(await e.data.text())}return c(e.data)},a.onerror=function(n){return o.error(n),r.call("error",e)},{on:(e,n)=>r.on(e,n),send:(n,t,r,s)=>{const c={from:e,to:r,action:n,data:t,ignore:s};return o.log("Sending ["+e+"] to ["+r+"]: "+JSON.stringify(t)),a.send(JSON.stringify(c))},close:async()=>(await r.call("beforeclose",e),a.onerror=s,a.close()),ready:function(){return new Promise((e=>{1===a.readyState?e():a.addEventListener("open",e)}))}}}},554:(e,n,o)=>{o.d(n,{A:()=>r});var t=o(217);async function r(e){let n;return"websocket"===e.connection?n=await o.e(249).then(o.bind(o,249)):"fake"===e.connection?n=await o.e(433).then(o.bind(o,433)):"net"===e.mode&&"webrtc"===e.connection?n=await o.e(111).then(o.bind(o,111)):"server"===e.mode&&"webrtc"===e.connection?n=await o.e(251).then(o.bind(o,251)):(0,t.v)(!1,"Unsupported mode"),n.default}},666:(e,n,o)=>{o.r(n),o.d(n,{default:()=>l});var t=o(345),r=o(554),s=o(211),a=o(911),c=o(42),i=o(233),d=o(217);async function l(e,n,o,l){const u=await(0,r.A)(o);return new Promise(((r,f)=>{const g=(0,t.wp)(e,o,Math.random);(0,d.v)(g,"No net id");const m=(0,c.A)(2,null,o),w=u(g,m,!1),p=(0,t.$0)(o,e.location);if(!p)return m.error("Can't determine ws address",p),void f(p);w.on("error",(e=>{m.error(e),f(e)})),function(e,n,o){n.on("socket_open",(()=>{const t=e.querySelector(".places");t.classList.add("loading"),o.log("socket_open");const r=()=>{o.log("onConnectionAnimation"),t.classList.remove("loading"),t.classList.add("flying-cards")};n.on("socket_close",r),n.on("open",r)}))}(n,w,m),w.on("open",(t=>{m.log("Server id ",t,g);const d=(0,i.A)(console);o.applyEffects=!1;const u=l({window:e,document:n,settings:o,myId:g});!function(e,n,o,t){const r=Object.keys((0,a.A)({},null));r.push("username");for(const s of r)o.log("setup handler",s),e.on(s,(e=>{if(!e||!e.externalId||t===e.externalId)return n.sendRawTo(s,e,"server");o.log("Ignore",e.externalId)}))}(u,w,m,g);const f={start:e=>{const n=u.onStart(e),t=(0,c.A)(6,null,o),r=n.getEngine(),a=(0,s.A)(r,t);return w.registerHandler(a,d),n}};w.registerHandler(f,d),u.onConnect(),r(u)})),w.connect(p).catch((e=>{m.error(e),f(e)}))}))}},233:(e,n,o)=>{function t(e){let n=Promise.resolve();return{add:o=>new Promise(((t,r)=>{n=n.then(o).then(t).catch((n=>{e.log(n),r(n)}))}))}}o.d(n,{A:()=>t})}}]);