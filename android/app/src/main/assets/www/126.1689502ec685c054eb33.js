"use strict";(self.webpackChunksuno=self.webpackChunksuno||[]).push([[126],{126:(e,n,t)=>{t.r(n),t.d(n,{default:()=>f});var o=t(272);var r=t(554),a=t(211),s=t(911),c=t(42),i=t(233),d=t(217),l=t(868),u=t(683);async function f(e,n,t,f){const g=await(0,r.A)(t),h=await(0,u.A)(t);return new Promise(((r,u)=>{const m=function(e,n,t){const r=e.sessionStorage.getItem(n.idNameInStorage);if(r)return r;const a=o.A.makeId(n.idNameLen,t);return e.sessionStorage.setItem(n.idNameInStorage,a),a}(e,t,Math.random);(0,d.v)(m,"No net id");const p=(0,c.A)(2,(0,l.z)(n,t.clNAnchor),t),w=g(m,p,!1,t),b=h.getConnectionUrl(t,e.location);w.on("error",(e=>{p.error(e),u(e)})),function(e,n,t){n.on("socket_open",(()=>{const o=e.querySelector(".places");o.classList.add("loading"),t.log("socket_open");const r=()=>{t.log("onConnectionAnimation"),o.classList.remove("loading"),o.classList.add("flying-cards")};n.on("socket_close",r),n.on("open",r)}))}(n,w,p),w.on("open",(o=>{p.log("Server id ",o,m);const d=(0,i.A)(console);t.applyEffects=!1;const l=f({window:e,document:n,settings:t,myId:m});!function(e,n,t,o){const r=Object.keys((0,s.A)({},null));r.push("username");for(const a of r)t.log("setup handler",a),e.on(a,(e=>{if(!e||!e.externalId||o===e.externalId)return n.sendRawTo(a,e,"server");t.log("Ignore",e.externalId)}))}(l,w,p,m);const u={start:e=>{const n=l.onStart(e),o=(0,c.A)(6,null,t),r=n.getEngine(),s=(0,a.A)(r,o);return w.registerHandler(s,d),n}};w.registerHandler(u,d),l.onConnect(),r(l)})),w.connect(b,h).catch((e=>{p.error(e),u(e)}))}))}},211:(e,n,t)=>{t.d(n,{A:()=>r});var o=t(541);function r(e,n){return Object.assign({},(0,o.A)(e,n),{changeCurrent:e.setCurrentObj,shuffle:e.setDeck,clearPlayer:e.cleanHandExternal,discard:e.onDiscard,roundover:e.onEndRound,gameover:e.onEndRound})}},233:(e,n,t)=>{function o(e){let n=Promise.resolve();return{add:t=>new Promise(((o,r)=>{n=n.then(t).then(o).catch((n=>{e.log(n),r(n)}))}))}}t.d(n,{A:()=>o})},554:(e,n,t)=>{t.d(n,{A:()=>r});var o=t(217);async function r(e){let n;return"websocket"===e.connection||"supabase"===e.connection?n=await t.e(249).then(t.bind(t,249)):"fake"===e.connection?n=await t.e(433).then(t.bind(t,433)):"net"===e.mode&&"webrtc"===e.connection?n=await t.e(111).then(t.bind(t,111)):"server"===e.mode&&"webrtc"===e.connection?n=await t.e(251).then(t.bind(t,251)):(0,o.v)(!1,"Unsupported mode"),n.default}},683:(e,n,t)=>{t.d(n,{A:()=>r});var o=t(217);async function r(e){let n;return"websocket"===e.channelType?n=await t.e(501).then(t.bind(t,501)):"supabase"===e.channelType?n=await Promise.all([t.e(470),t.e(923)]).then(t.bind(t,923)):(0,o.v)(!1,"Unsupported mode"),n.default}},868:(e,n,t)=>{function o(e,n){return n?e.querySelector(n):null}t.d(n,{z:()=>o})}}]);